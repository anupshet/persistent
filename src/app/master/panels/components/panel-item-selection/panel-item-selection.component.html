<!-- Â© 2023 Bio-Rad Laboratories, Inc. All Rights Reserved. -->
<div class="panel-item-selection-container">
  <mat-tree [dataSource]="dataSource" [treeControl]="treeControl">
    <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle matTreeNodePadding>
      <button mat-icon-button disabled></button>
      <div class="box" [matTooltip]="node.isLotExpired ? lotExpiredToolTip : ''" matTooltipPosition="right">
        <mat-checkbox #leafItemCheckBox class="checklist-leaf-node spec-leaf-checkbox"
          [checked]="checklistSelection.isSelected(node)" (change)="leafItemSelectionToggle(node, leafItemCheckBox)"
          [disabled]="node.isArchived || node.isLotExpired || !hasPermissionToAccess([permissions.PanelsAdd, permissions.PanelsEdit, permissions.Delete])">
          {{node.displayName}}
        </mat-checkbox>
        <span *ngIf="node.secondaryText" class="grey">{{node.secondaryText}}</span>
      </div>
    </mat-tree-node>

    <mat-tree-node *matTreeNodeDef="let node; when: hasChild" matTreeNodePadding class="spec-tree-node">
      <button mat-icon-button matTreeNodeToggle [attr.aria-label]="'Toggle ' + node.displayName"
        (click)="expandWithGettingNewChildren(node)" class="spec-expand-colapse-button">
        <mat-icon class="mat-icon-rtl-mirror">
          {{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
        </mat-icon>
      </button>
      <div class="box" [matTooltip]="node.isLotExpired ? lotExpiredToolTip : ''" matTooltipPosition="right">
        <mat-checkbox #parentItemCheckBox [checked]="descendantsAllSelected(node)"
          [indeterminate]="descendantsPartiallySelected(node)" class="spec-parent-checkbox"
          (change)="parentItemSelectionToggle(node, parentItemCheckBox)"
          [disabled]="node.isArchived || node.isLotExpired || !hasPermissionToAccess([permissions.PanelsAdd, permissions.PanelsEdit, permissions.Delete])">{{node.displayName}}
        </mat-checkbox>
        <span *ngIf="node.secondaryText" class="grey">{{node.secondaryText}}</span>
      </div>
    </mat-tree-node>
  </mat-tree>
</div>
